{"version":3,"sources":["api/axiosClient.js","actions/types.js","reducers/auth.js","reducers/message.js","reducers/tour.js","reducers/index.js","store.js","services/auth.service.js","components/Login.jsx","actions/auth.js","components/Register.jsx","ultil/alert.js","services/auth-header.js","api/userApi.js","services/user.service.js","actions/tours.js","components/Home.jsx","components/Profile.jsx","helpers/history.js","App.js","actions/message.js","serviceWorker.js","index.js"],"names":["axiosClient","axios","create","baseURL","process","headers","paramsSerializer","params","queryString","stringify","interceptors","request","use","a","config","token","localStorage","getItem","Authorization","response","data","error","REGISTER_SUCCESS","REGISTER_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","UPDATE_SUCCESS","SET_MESSAGE","CLEAR_MESSAGE","SAVE_TOURS","user","JSON","parse","initialState","isLoggedIn","tours","combineReducers","auth","state","action","type","payload","message","tour","console","log","middleware","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","name","email","password","passwordConfirm","post","then","setItem","clear","required","value","className","role","Login","props","form","useRef","checkBtn","useState","setEmail","setPassword","loading","setLoading","useSelector","dispatch","useDispatch","to","src","alt","onSubmit","e","preventDefault","current","validateAll","context","_errors","length","authService","Promise","resolve","toString","reject","login","history","push","window","location","reload","catch","ref","onChange","target","validations","placeholder","disabled","style","display","validEmail","isEmail","vname","vpassword","vpasswordConfirm","comp","Register","setName","setPasswordConfirm","successful","setSuccessful","register","hideAlert","el","document","querySelector","parentElement","removeChild","showAlert","msg","markup","insertAdjacentHTML","setTimeout","authHeader","userApi","getMe","get","updateMe","patch","updateMyPassword","updateAdmnin","url","setting_id","tourActions","SetAllTour","Home","listTour","setListtour","useEffect","UserService","map","item","i","imageCover","difficulty","duration","summary","xlinkHref","startLocation","description","moment","startDates","format","locations","maxGroupSize","price","ratingsAverage","ratingsQuantity","slug","id","Profile","routeProfile","path","icon","text","active","href","routeAdmin","checkBtn1","photo","setPhoto","passwordCurrent","setPasswordCurrent","handleUpdate","status","vnewpassword","handleChangePass","files","htmlFor","newpassword","createBrowserHistory","Tour","React","lazy","App","currentUser","listen","Suspense","fallback","onClick","exact","component","render","Boolean","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.256e4039.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport queryString from \"query-string\";\r\n\r\n//Set up defaul config for http request here\r\nconst axiosClient = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL,\r\n  headers: {\r\n    \"content-type\": \"application/json\",\r\n  },\r\n  paramsSerializer: (params) => queryString.stringify(params),\r\n});\r\n\r\naxiosClient.interceptors.request.use(async (config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\naxiosClient.interceptors.response.use(\r\n  (response) => {\r\n    if (response && response.data) {\r\n      return response.data;\r\n    }\r\n\r\n    return response;\r\n  },\r\n  (error) => {\r\n    //handle errors\r\n    throw error;\r\n  }\r\n);\r\n\r\nexport default axiosClient;\r\n","export const REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\r\nexport const REGISTER_FAIL = \"REGISTER_FAIL\";\r\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\r\nexport const LOGIN_FAIL = \"LOGIN_FAIL\";\r\nexport const LOGOUT = \"LOGOUT\";\r\n\r\nexport const UPDATE_SUCCESS = \"UPDATE_SUCCESS\";\r\nexport const UPDATE_FAIL = \"UPDATE_FAIL\";\r\n\r\nexport const SET_MESSAGE = \"SET_MESSAGE\";\r\nexport const CLEAR_MESSAGE = \"CLEAR_MESSAGE\";\r\n\r\nexport const SAVE_TOURS = \"SAVE_TOURS\";\r\n","import {\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAIL,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  LOGOUT,\r\n  UPDATE_SUCCESS,\r\n} from \"../actions/types\";\r\n\r\nconst user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\nconst initialState = user\r\n  ? { isLoggedIn: true, user }\r\n  : { isLoggedIn: false, user: null };\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default function (state = initialState, action) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case REGISTER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoggedIn: false,\r\n      };\r\n    case REGISTER_FAIL:\r\n      return {\r\n        ...state,\r\n        isLoggedIn: false,\r\n      };\r\n    case LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoggedIn: true,\r\n        user: payload.user,\r\n      };\r\n    case LOGIN_FAIL:\r\n      return {\r\n        ...state,\r\n        isLoggedIn: false,\r\n        user: null,\r\n      };\r\n    case LOGOUT:\r\n      return {\r\n        ...state,\r\n        isLoggedIn: false,\r\n        user: null,\r\n      };\r\n    case UPDATE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isLoggedIn: true,\r\n        user: payload.user,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { SET_MESSAGE, CLEAR_MESSAGE } from \"../actions/types\";\r\n\r\nconst initialState = {};\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default function (state = initialState, action) {\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    case SET_MESSAGE:\r\n      return { message: payload };\r\n\r\n    case CLEAR_MESSAGE:\r\n      return { message: \"\" };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { SAVE_TOURS } from \"../actions/types\";\r\n\r\nconst user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\nconst initialState = user ? { tours: [] } : {};\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default function (state = initialState, action) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SAVE_TOURS:\r\n      console.log(\"dispacth vao day\", action);\r\n      return {\r\n        ...state,\r\n        tours: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport auth from \"./auth\";\r\nimport message from \"./message\";\r\nimport tour from \"./tour\";\r\nexport default combineReducers({\r\n  auth,\r\n  message,\r\n  tour,\r\n});\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;\r\n","import axiosClient from \"../api/axiosClient\";\r\n\r\nconst register = (name, email, password, passwordConfirm) => {\r\n  const url = \"/users/signup\";\r\n  return axiosClient.post(url, {\r\n    name,\r\n    email,\r\n    password,\r\n    passwordConfirm,\r\n  });\r\n};\r\n\r\nconst login = (email, password) => {\r\n  const url = \"/users/login\";\r\n  return axiosClient\r\n    .post(url, {\r\n      email,\r\n      password,\r\n    })\r\n    .then((response) => {\r\n      if (response.token) {\r\n        localStorage.setItem(\"token\", response.token);\r\n        localStorage.setItem(\"user\", JSON.stringify(response.data.user));\r\n      }\r\n\r\n      return response.data;\r\n    });\r\n};\r\n\r\nconst logout = () => {\r\n  localStorage.clear();\r\n};\r\n\r\nconst getCurrentUser = () => {\r\n  return JSON.parse(localStorage.getItem(\"user\"));\r\n};\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n  register,\r\n  login,\r\n  logout,\r\n  getCurrentUser,\r\n};\r\n","import React, { useState, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\n\r\nimport { login } from \"../actions/auth\";\r\n\r\nconst required = (value) => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst Login = (props) => {\r\n  const form = useRef();\r\n  const checkBtn = useRef();\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { isLoggedIn } = useSelector((state) => state.auth);\r\n  const { message } = useSelector((state) => state.message);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const onChangeEmail = (e) => {\r\n    const email = e.target.value;\r\n    setEmail(email);\r\n  };\r\n\r\n  const onChangePassword = (e) => {\r\n    const password = e.target.value;\r\n    setPassword(password);\r\n  };\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n\r\n    setLoading(true);\r\n    form.current.validateAll();\r\n    if (checkBtn.current.context._errors.length === 0) {\r\n      dispatch(login(email, password))\r\n        .then(() => {\r\n          props.history.push(\"/\");\r\n          window.location.reload();\r\n        })\r\n        .catch(() => {\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  if (isLoggedIn) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"login-form\">\r\n      <h2 className=\"heading-secondary ma-bt-lg\">Log into your account</h2>\r\n      <img\r\n        src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n        alt=\"profile-img\"\r\n        className=\"profile-img-card\"\r\n      />\r\n\r\n      <Form onSubmit={handleLogin} ref={form}>\r\n        <div className=\"form-group\">\r\n          <label className=\"form__label\">Email</label>\r\n          <Input\r\n            type=\"text\"\r\n            className=\"form__input\"\r\n            name=\"Email\"\r\n            value={email}\r\n            onChange={onChangeEmail}\r\n            validations={[required]}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group ma-bt-md\">\r\n          <label className=\"form__label\">Password</label>\r\n          <Input\r\n            type=\"password\"\r\n            className=\"form__input\"\r\n            name=\"password\"\r\n            value={password}\r\n            placeholder=\"********\"\r\n            onChange={onChangePassword}\r\n            validations={[required]}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <button className=\"btn btn--green\" disabled={loading}>\r\n            {loading && (\r\n              <span className=\"spinner-border spinner-border-sm\"></span>\r\n            )}\r\n            <span>Login</span>\r\n          </button>\r\n        </div>\r\n\r\n        {message && (\r\n          <div className=\"form-group\">\r\n            <div className=\"alert alert-danger\" role=\"alert\">\r\n              {message}\r\n            </div>\r\n          </div>\r\n        )}\r\n        <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import {\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAIL,\r\n  LOGIN_FAIL,\r\n  LOGOUT,\r\n  SET_MESSAGE,\r\n  LOGIN_SUCCESS,\r\n} from \"./types\";\r\n\r\nimport authService from \"../services/auth.service\";\r\n\r\nexport const register =\r\n  (name, email, password, passwordConfirm) => (dispatch) => {\r\n    return authService.register(name, email, password, passwordConfirm).then(\r\n      (response) => {\r\n        dispatch({\r\n          type: REGISTER_SUCCESS,\r\n        });\r\n        dispatch({\r\n          type: SET_MESSAGE,\r\n          payload: response.data.message,\r\n        });\r\n\r\n        return Promise.resolve();\r\n      },\r\n      (error) => {\r\n        const message =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString();\r\n\r\n        dispatch({\r\n          type: REGISTER_FAIL,\r\n        });\r\n\r\n        dispatch({\r\n          type: SET_MESSAGE,\r\n          payload: message,\r\n        });\r\n\r\n        return Promise.reject();\r\n      }\r\n    );\r\n  };\r\n\r\nexport const login = (email, password) => (dispatch) => {\r\n  return authService.login(email, password).then(\r\n    (data) => {\r\n      dispatch({\r\n        type: LOGIN_SUCCESS,\r\n        payload: { user: data },\r\n      });\r\n      return Promise.resolve();\r\n    },\r\n    (error) => {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n      dispatch({\r\n        type: LOGIN_FAIL,\r\n      });\r\n      dispatch({\r\n        type: SET_MESSAGE,\r\n        payload: message,\r\n      });\r\n      return Promise.reject();\r\n    }\r\n  );\r\n};\r\n\r\nexport const logout = () => (dispatch) => {\r\n  authService.logout();\r\n\r\n  dispatch({\r\n    type: LOGOUT,\r\n  });\r\n};\r\n","import React, { useState, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport { isEmail } from \"validator\";\r\n\r\nimport { register } from \"../actions/auth\";\r\n\r\nconst required = (value) => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst validEmail = (value) => {\r\n  if (!isEmail(value)) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This is not valid email\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vname = (value) => {\r\n  if (value.length < 3 || value.length > 20) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The username must be between 3 and 20 character\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst vpassword = (value) => {\r\n  if (value.length < 6 || value.length > 40) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        The password must be between 6 and 40 characters.\r\n      </div>\r\n    );\r\n  }\r\n};\r\nconst vpasswordConfirm = (value, props, comp) => {\r\n  //React validation form password\r\n  //   console.log(value, comp);\r\n  //   eslint-disable-next-line eqeqeq\r\n  if (value != comp.password[0].value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        Passwords don't match\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nconst Register = () => {\r\n  const form = useRef();\r\n  const checkBtn = useRef();\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const [successful, setSuccessful] = useState(false);\r\n\r\n  const { message } = useSelector((state) => state.message);\r\n  const dispatch = useDispatch();\r\n\r\n  const onChangename = (e) => {\r\n    const name = e.target.value;\r\n    setName(name);\r\n  };\r\n\r\n  const onChangeEmail = (e) => {\r\n    const email = e.target.value;\r\n    setEmail(email);\r\n  };\r\n\r\n  const onChangePassword = (e) => {\r\n    const password = e.target.value;\r\n    setPassword(password);\r\n  };\r\n\r\n  const onChangeConfirmpassword = (e) => {\r\n    const passwordConfirm = e.target.value;\r\n    setPasswordConfirm(passwordConfirm);\r\n  };\r\n\r\n  const handleRegister = (e) => {\r\n    e.preventDefault();\r\n\r\n    setSuccessful(false);\r\n\r\n    form.current.validateAll();\r\n\r\n    if (checkBtn.current.context._errors.length === 0) {\r\n      dispatch(register(name, email, password, passwordConfirm))\r\n        .then(() => {\r\n          setSuccessful(true);\r\n        })\r\n        .catch(() => {\r\n          setSuccessful(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-form\">\r\n      <img\r\n        src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n        alt=\"profile-img\"\r\n        className=\"profile-img-card\"\r\n      />\r\n\r\n      <Form onSubmit={handleRegister} ref={form}>\r\n        {!successful && (\r\n          <div>\r\n            <div className=\"form-group\">\r\n              <label className=\"form__label\">Username</label>\r\n              <Input\r\n                type=\"text\"\r\n                className=\"form__input\"\r\n                name=\"username\"\r\n                value={name}\r\n                onChange={onChangename}\r\n                validations={[required, vname]}\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label className=\"form__label\">Email</label>\r\n              <Input\r\n                type=\"text\"\r\n                className=\"form__input\"\r\n                name=\"email\"\r\n                value={email}\r\n                onChange={onChangeEmail}\r\n                validations={[required, validEmail]}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label className=\"form__label\">Password</label>\r\n              <Input\r\n                type=\"password\"\r\n                className=\"form__input\"\r\n                name=\"password\"\r\n                value={password}\r\n                onChange={onChangePassword}\r\n                validations={[required, vpassword]}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label className=\"form__label\">ConfirmPassword</label>\r\n              <Input\r\n                type=\"password\"\r\n                className=\"form__input\"\r\n                name=\"passwordConfirm\"\r\n                value={passwordConfirm}\r\n                onChange={onChangeConfirmpassword}\r\n                validations={[required, vpassword, vpasswordConfirm]}\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <button className=\"btn btn-primary btn-block\">Sign Up</button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {message && (\r\n          <div className=\"form-group\">\r\n            <div\r\n              className={\r\n                successful ? \"alert alert-success\" : \"alert alert-danger\"\r\n              }\r\n              role=\"alert\"\r\n            >\r\n              {message}\r\n            </div>\r\n          </div>\r\n        )}\r\n        <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\nexport default Register;\r\n","/* eslint-disable */\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n","export default function authHeader() {\r\n  const data = JSON.parse(localStorage.getItem(\"data\"));\r\n\r\n  if (data && data.token) {\r\n    return { \"x-access-token\": data.token };\r\n  } else {\r\n    return {};\r\n  }\r\n}\r\n","import axiosClient from \"./axiosClient\";\r\nimport authHeader from \"../services/auth-header\";\r\nconst userApi = {\r\n  getMe: () => {\r\n    const url = \"/users/me\";\r\n    return axiosClient.get(url, { headers: authHeader() });\r\n  },\r\n  updateMe: (data) => {\r\n    // const url = `/users/${data.setting_id}`;\r\n    const url = `/users/updateMe`;\r\n    // if (data.setting_id) delete data.setting_id;\r\n    return axiosClient.patch(url, JSON.stringify(data), {\r\n      headers: authHeader(),\r\n    });\r\n  },\r\n  updateMyPassword: (data) => {\r\n    const url = `/users/updateMyPassword`;\r\n    return axiosClient.patch(url, JSON.stringify(data), {\r\n      headers: authHeader(),\r\n    });\r\n  },\r\n  updateAdmnin: (data) => {\r\n    const url = `/users/${data.setting_id}`;\r\n\r\n    // if (data.setting_id) delete data.setting_id;\r\n    return axiosClient.patch(url, JSON.stringify(data), {\r\n      headers: authHeader(),\r\n    });\r\n  },\r\n};\r\n\r\nexport default userApi;\r\n","import { showAlert } from \"../ultil/alert\";\r\nimport axiosClient from \"../api/axiosClient\";\r\nimport userApi from \"../api/userApi\";\r\nimport authService from \"../services/auth.service\";\r\nimport authHeader from \"./auth-header\";\r\n\r\nconst getPublicContent = () => {\r\n  const url = \"/tours\";\r\n  return axiosClient.get(url, { headers: authHeader() });\r\n};\r\n\r\nconst updateSettings = async (name, email, photo) => {\r\n  try {\r\n    const currentData = authService.getCurrentUser();\r\n    const url = `/users/${currentData._id}`;\r\n\r\n    const response = await axiosClient.patch(url, { name, email, photo });\r\n    console.log(response);\r\n    if (response.status === \"success\") {\r\n      showAlert(\"success\");\r\n    }\r\n  } catch (err) {\r\n    showAlert(\"error\");\r\n  }\r\n};\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n  getPublicContent,\r\n  updateSettings,\r\n};\r\n","import { SAVE_TOURS, SET_MESSAGE } from \"./types\";\r\n\r\nconst tourActions = {\r\n  SetAllTour: (payload) => ({\r\n    type: SAVE_TOURS,\r\n    payload,\r\n  }),\r\n};\r\nexport default tourActions;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport UserService from \"../services/user.service\";\r\nimport moment from \"moment\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport tourActions from \"../actions/tours\";\r\n\r\nconst Home = () => {\r\n  const [listTour, setListtour] = useState([]);\r\n  const dispatch = useDispatch();\r\n  // const listTour = useSelector((state) => state.tour.tours);\r\n  useEffect(() => {\r\n    UserService.getPublicContent().then(\r\n      (response) => {\r\n        console.log(\"xong roi moi chay vao day\");\r\n        dispatch(tourActions.SetAllTour(response.data.data));\r\n        setListtour(response.data.data);\r\n      },\r\n      () => dispatch(tourActions.SetAllTour([]))\r\n    );\r\n    console.log(\"chạy vao day truoc\");\r\n  }, [dispatch]);\r\n  return (\r\n    <div className=\"card-container \">\r\n      {listTour.map((item, i) => {\r\n        return (\r\n          <div key={i} className=\"card\">\r\n            <div className=\"card__header\">\r\n              <div className=\"card__picture\">\r\n                <div className=\"card__picture-overlay\">&nbsp;</div>\r\n                <img\r\n                  src={`../tours/${item.imageCover}`}\r\n                  alt={`${item.name}`}\r\n                  className=\"card__picture-img\"\r\n                />\r\n              </div>\r\n\r\n              <h3 className=\"heading-tertirary\">\r\n                <span>{item.name}</span>\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"card__details\">\r\n              <h4 className=\"card__sub-heading\">{`${item.difficulty} ${item.duration}-day tour`}</h4>\r\n              <p className=\"card__text\">{item.summary}</p>\r\n              <div className=\"card__data\">\r\n                <svg className=\"card__icon\">\r\n                  <use xlinkHref=\"img/icons.svg#icon-map-pin\"></use>\r\n                </svg>\r\n                <span>{item.startLocation.description}</span>\r\n              </div>\r\n              <div className=\"card__data\">\r\n                <svg className=\"card__icon\">\r\n                  <use xlinkHref=\"img/icons.svg#icon-calendar\"></use>\r\n                </svg>\r\n                <span>\r\n                  {moment(item.startDates[0]).format(\"DD/MM/YYYY HH:mm:ss\")}\r\n                </span>\r\n              </div>\r\n              <div className=\"card__data\">\r\n                <svg className=\"card__icon\">\r\n                  <use xlinkHref=\"img/icons.svg#icon-flag\"></use>\r\n                </svg>\r\n                <span>{`${item.locations.length} stops`}</span>\r\n              </div>\r\n              <div className=\"card__data\">\r\n                <svg className=\"card__icon\">\r\n                  <use xlinkHref=\"img/icons.svg#icon-user\"></use>\r\n                </svg>\r\n                <span>{`${item.maxGroupSize} people `}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"card__footer\">\r\n              <p>\r\n                <span className=\"card__footer-value\">{`$${item.price}`}</span>\r\n\r\n                <span className=\"card__footer-text\">per person</span>\r\n              </p>\r\n              <p className=\"card__ratings\">\r\n                <span className=\"card__footer-value\">\r\n                  {item.ratingsAverage}\r\n                </span>\r\n                <span className=\"card__footer-text\">{`rating (${item.ratingsQuantity})`}</span>\r\n              </p>\r\n              <Link\r\n                to={`/tour/${item.slug}/${item.id}`}\r\n                className=\"btn btn--green btn--small\"\r\n              >\r\n                Details\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\nexport default Home;\r\n","/* eslint-disable jsx-a11y/img-redundant-alt */\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport authService from \"../services/auth.service\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { showAlert } from \"../ultil/alert\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\n\r\nimport userApi from \"../api/userApi\";\r\nimport userAction from \"../actions/users\";\r\n\r\nconst required = (value) => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required\r\n      </div>\r\n    );\r\n  }\r\n};\r\nconst Profile = () => {\r\n  const settings = [\r\n    {\r\n      path: \"/#\",\r\n      icon: \"settings\",\r\n      text: \"Settings\",\r\n      active: \"active\",\r\n    },\r\n    {\r\n      path: \"/#\",\r\n      icon: \"briefcase\",\r\n      text: \"My Bookings\",\r\n    },\r\n    {\r\n      path: \"/#\",\r\n      icon: \"star\",\r\n      text: \"My Reviews\",\r\n    },\r\n    {\r\n      path: \"/#\",\r\n      icon: \"credit-card\",\r\n      text: \"Billing\",\r\n    },\r\n  ];\r\n\r\n  const Admin = [\r\n    {\r\n      path: \"/#\",\r\n      icon: \"map\",\r\n      text: \"Manage Tours\",\r\n    },\r\n    {\r\n      path: \"/#\",\r\n      icon: \"users\",\r\n      text: \"Manage Users\",\r\n    },\r\n    {\r\n      path: \"/#\",\r\n      icon: \"star\",\r\n      text: \"Manage Reviews\",\r\n    },\r\n    {\r\n      path: \"/#\",\r\n      icon: \"briefcase\",\r\n      text: \"Manage Booking\",\r\n    },\r\n  ];\r\n  let user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n  // const dispatch = useDispatch();\r\n  // const [myProfile, setMyProfile] = useState({});\r\n\r\n  // useEffect(() => {\r\n  //   // Todo: Call api0\r\n  //   const ProfileMe = async () => {\r\n  //     try {\r\n  //       const response = await userApi.getMe();\r\n  //       setMyProfile(response.data.data);\r\n  //       console.log(response.data.data);\r\n  //     } catch (error) {\r\n  //       console.log(\"Fail to featch tour\", error);\r\n  //     }\r\n  //   };\r\n  //   ProfileMe();\r\n  // }, []);\r\n\r\n  const routeProfile = settings.map(({ path, icon, text, active }, i) => (\r\n    <>\r\n      <li key={i} className={`${active ? \"side-nav--active\" : \"\"}`}>\r\n        <a href={path}>\r\n          <svg>\r\n            <use xlinkHref={`../icons.svg#icon-${icon}`}></use>\r\n          </svg>\r\n          {text}\r\n        </a>\r\n      </li>\r\n    </>\r\n  ));\r\n\r\n  const routeAdmin = Admin.map(({ path, icon, text, active }, i) => (\r\n    <>\r\n      <li key={i} className={`${active ? \"side-nav--active\" : \"\"}`}>\r\n        <a href={path}>\r\n          <svg>\r\n            <use xlinkHref={`../icons.svg#icon-${icon}`}></use>\r\n          </svg>\r\n          {text}\r\n        </a>\r\n      </li>\r\n    </>\r\n  ));\r\n\r\n  const form = useRef();\r\n  const checkBtn = useRef();\r\n  const checkBtn1 = useRef();\r\n  const [name, setName] = useState(user.name);\r\n  const [email, setEmail] = useState(user.email);\r\n  const [photo, setPhoto] = useState(user.photo);\r\n  const [passwordCurrent, setPasswordCurrent] = useState(\"********\");\r\n  const [password, setPassword] = useState(\"********\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"********\");\r\n  const [loading, setLoading] = useState(false);\r\n  const { message } = useSelector((state) => state.message);\r\n\r\n  const onChangeName = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const onChangeEmail = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n  const onChangePhoto = (e) => {\r\n    const photo = e.target.files[0];\r\n    console.log(e.target.files[0]);\r\n    // eslint-disable-next-line no-undef\r\n    setPhoto(photo);\r\n  };\r\n  const handleUpdate = async (e) => {\r\n    e.preventDefault();\r\n    // setLoading(true);\r\n    if (checkBtn.current.context._errors.length === 0) {\r\n      const data = { name, email, photo };\r\n      //call api\r\n\r\n      const response = await userApi.updateMe(data);\r\n      console.log(response);\r\n      if (response.status === \"success\") {\r\n        showAlert(\r\n          \"success\",\r\n          `${response.data.user.name} update in successfully!`\r\n        );\r\n        // dispatch(userAction.UpdateProfile(response.data));\r\n        localStorage.setItem(\"user\", JSON.stringify(response.data.user));\r\n        window.location.reload();\r\n        console.log(response.data.user.name);\r\n      }\r\n    } else {\r\n      showAlert(\"no success\");\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const vnewpassword = (value) => {\r\n    if (value.length < 6 || value.length > 40) {\r\n      return (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          The password must be between 6 and 40 characters.\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n  const vconfirmPass = (value, props, comp) => {\r\n    //React validation form password\r\n    // console.log(value, comp);\r\n    //   eslint-disable-next-line eqeqeq\r\n    if (value != comp.newpassword[0].value) {\r\n      return (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          Passwords don't match\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  const Password = (e) => {\r\n    setPasswordCurrent(e.target.value);\r\n  };\r\n\r\n  const newPassword = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n  const ConfirmNewPassword = (e) => {\r\n    setPasswordConfirm(e.target.value);\r\n  };\r\n\r\n  const handleChangePass = async (e) => {\r\n    e.preventDefault();\r\n    // setLoading(true);\r\n    if (checkBtn1.current.context._errors.length === 0) {\r\n      const data = { passwordCurrent, password, passwordConfirm };\r\n      //call api\r\n\r\n      const response = await userApi.updateMyPassword(data);\r\n      console.log(response);\r\n      if (response.status === \"success\") {\r\n        showAlert(\r\n          \"success\",\r\n          `${response.data.user.name} update password in successfully!`\r\n        );\r\n        // dispatch(userAction.UpdateProfile(response.data));\r\n        console.log(response.data.user.name);\r\n      }\r\n    } else {\r\n      showAlert(\"no success\");\r\n      setLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"user-view\">\r\n        <nav className=\"user-view__menu\">\r\n          <ul className=\"side-nav\">{routeProfile}</ul>\r\n\r\n          {user.role === \"admin\" ? (\r\n            <div className=\"admin-nav\">\r\n              <h5 className=\"admin-nav__heading\">Admin</h5>\r\n              <ul className=\"side-nav\">{routeAdmin}</ul>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </nav>\r\n\r\n        <div className=\"user-view__content\">\r\n          <div className=\"user-view__form-container\">\r\n            <h2 className=\"heading-secondary ma-bt-md\">\r\n              Your account settings\r\n            </h2>\r\n\r\n            <Form\r\n              className=\"form form-user-data\"\r\n              onSubmit={handleUpdate}\r\n              ref={form}\r\n            >\r\n              <div className=\"form-group\">\r\n                <label className=\"form__label\">Name</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  className=\"form__input\"\r\n                  name=\"name\"\r\n                  value={name}\r\n                  onChange={onChangeName}\r\n                  validations={[required]}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group ma-bt-md\">\r\n                <label className=\"form__label\">Email address</label>\r\n                <Input\r\n                  type=\"email\"\r\n                  className=\"form__input\"\r\n                  name=\"email\"\r\n                  value={email}\r\n                  onChange={onChangeEmail}\r\n                  validations={[required]}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form__group form__photo-upload\">\r\n                <img\r\n                  src={`../users/${user.photo}`}\r\n                  className=\"form__user-photo\"\r\n                  alt=\"Photo user\"\r\n                />\r\n                <Input\r\n                  type=\"file\"\r\n                  className=\"form__upload\"\r\n                  name=\"photo\"\r\n                  id=\"photo\"\r\n                  onChange={onChangePhoto}\r\n                />\r\n                <label htmlFor=\"photo\">Choose new photo</label>\r\n              </div>\r\n              <div className=\"form-group right\">\r\n                <button\r\n                  className=\"btn btn--small btn--green\"\r\n                  disabled={loading}\r\n                >\r\n                  {loading && (\r\n                    <span className=\"spinner-border spinner-border-sm\"></span>\r\n                  )}\r\n                  <span>Save Settings</span>\r\n                </button>\r\n              </div>\r\n              {message && (\r\n                <div className=\"form-group\">\r\n                  <div className=\"alert alert-danger\" role=\"alert\">\r\n                    {message}\r\n                  </div>\r\n                </div>\r\n              )}\r\n              <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\r\n            </Form>\r\n          </div>\r\n          <div className=\"user-view__content\">\r\n            <div className=\"user-view__form-container\">\r\n              <h2 className=\"heading-secondary ma-bt-md\">Password changed</h2>\r\n\r\n              <Form\r\n                className=\"form form-user-data\"\r\n                onSubmit={handleChangePass}\r\n                ref={form}\r\n              >\r\n                <div className=\"form-group\">\r\n                  <label className=\"form__label\">Current password</label>\r\n                  <Input\r\n                    type=\"password\"\r\n                    className=\"form__input\"\r\n                    name=\"password\"\r\n                    value={passwordCurrent}\r\n                    onChange={Password}\r\n                    validations={[required]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group ma-bt-md\">\r\n                  <label className=\"form__label\">New Password</label>\r\n                  <Input\r\n                    type=\"password\"\r\n                    className=\"form__input\"\r\n                    name=\"newpassword\"\r\n                    value={password}\r\n                    onChange={newPassword}\r\n                    validations={[required, vnewpassword]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"form-group ma-bt-md\">\r\n                  <label className=\"form__label\">Confirm New Password</label>\r\n                  <Input\r\n                    type=\"password\"\r\n                    className=\"form__input\"\r\n                    name=\"confirmPass\"\r\n                    value={passwordConfirm}\r\n                    onChange={ConfirmNewPassword}\r\n                    validations={[required, vnewpassword, vconfirmPass]}\r\n                  />\r\n                </div>\r\n                <div className=\"form-group right\">\r\n                  <button\r\n                    className=\"btn btn--small btn--green\"\r\n                    disabled={loading}\r\n                  >\r\n                    {loading && (\r\n                      <span className=\"spinner-border spinner-border-sm\"></span>\r\n                    )}\r\n                    <span>Save Password</span>\r\n                  </button>\r\n                </div>\r\n                {message && (\r\n                  <div className=\"form-group\">\r\n                    <div className=\"alert alert-danger\" role=\"alert\">\r\n                      {message}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                <CheckButton style={{ display: \"none\" }} ref={checkBtn1} />\r\n              </Form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import { createBrowserHistory } from \"history\";\r\n\r\nexport const history = createBrowserHistory();\r\n","/* eslint-disable jsx-a11y/img-redundant-alt */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Router, Switch, Route, Link } from \"react-router-dom\";\r\nimport { Redirect } from \"react-router\";\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./App.css\";\r\n\r\nimport Login from \"./components/Login\";\r\nimport Register from \"./components/Register\";\r\nimport Home from \"./components/Home\";\r\nimport Profile from \"./components/Profile\";\r\n\r\nimport { logout } from \"./actions/auth\";\r\nimport { clearMessage } from \"./actions/message\";\r\n\r\nimport { history } from \"./helpers/history\";\r\n\r\nconst Tour = React.lazy(() => import(\"../src/components/Tour\"));\r\n\r\nconst App = () => {\r\n  const { user: currentUser } = useSelector((state) => state.auth);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    history.listen((location) => {\r\n      dispatch(clearMessage()); // clear message when changing location\r\n    });\r\n  }, [dispatch]);\r\n\r\n  const logOut = () => {\r\n    dispatch(logout());\r\n  };\r\n  return (\r\n    <React.Suspense fallback={<p>Loading...</p>}>\r\n      <Router history={history}>\r\n        <div>\r\n          <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\r\n            <Link to={\"/\"} className=\"navbar-brand\">\r\n              <div className=\"header__logo\">\r\n                <img src=\"/logo-green.png\" alt=\"Natours logo\" />\r\n              </div>\r\n            </Link>\r\n            <div className=\"navbar-nav mr-auto\">\r\n              <li className=\"nav-item\">\r\n                <Link to={\"/home\"} className=\"nav__el\">\r\n                  Home\r\n                </Link>\r\n              </li>\r\n              <span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n              {/* {showModeratorBoard && (\r\n              <li className=\"nav-item\">\r\n                <Link to={\"/mod\"} className=\"nav-link\">\r\n                  Moderator Board\r\n                </Link>\r\n              </li>\r\n            )} */}\r\n\r\n              {/* {showAdminBoard && (\r\n              <li className=\"nav-item\">\r\n                <Link to={\"/admin\"} className=\"nav-link\">\r\n                  Admin Board\r\n                </Link>\r\n              </li>\r\n            )} */}\r\n              {/* {currentUser && (\r\n                <li className=\"nav-item\">\r\n                  <Link to={\"/user\"} className=\"nav__el\">\r\n                    User\r\n                  </Link>\r\n                </li>\r\n              )} */}\r\n            </div>\r\n\r\n            {currentUser ? (\r\n              <div className=\"navbar-nav ml-auto\">\r\n                <li className=\"nav-item\">\r\n                  <Link to={\"/profile\"} className=\"nav__el\">\r\n                    <img\r\n                      className=\"nav__user-img\"\r\n                      src={`/users/${currentUser.photo}`}\r\n                      alt={`Photo of ${currentUser.name}`}\r\n                    />\r\n                    {currentUser.name}\r\n                  </Link>\r\n                </li>\r\n                <span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                <li className=\"nav-item\">\r\n                  <a href=\"/login\" className=\"nav__el\" onClick={logOut}>\r\n                    LogOut\r\n                  </a>\r\n                </li>\r\n              </div>\r\n            ) : (\r\n              <div className=\"navbar-nav ml-auto\">\r\n                <li className=\"nav-item\">\r\n                  <Link to={\"/login\"} className=\"nav__el\">\r\n                    Login\r\n                  </Link>\r\n                </li>\r\n                <span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                <li className=\"nav-item\">\r\n                  <Link to={\"/register\"} className=\"nav__el\">\r\n                    Sign Up\r\n                  </Link>\r\n                </li>\r\n              </div>\r\n            )}\r\n          </nav>\r\n          <div className=\"main\">\r\n            <Switch>\r\n              <Route exact path={[\"/\", \"/home\"]} component={Home} />\r\n              <Route exact path=\"/login\" component={Login} />\r\n              <Route exact path=\"/register\" component={Register} />\r\n              <Route path=\"/profile\" component={Profile} />\r\n              <Route\r\n                path=\"/tour/:slug/:tourId\"\r\n                render={() => {\r\n                  return window.localStorage.getItem(\"token\") ? (\r\n                    <Tour />\r\n                  ) : (\r\n                    <Redirect to=\"/Login\" />\r\n                  );\r\n                }}\r\n              ></Route>\r\n\r\n              {/* <Route path=\"/user\" component={BoardUser} /> */}\r\n              {/* <Route path=\"/mod\" component={BoardModerator} />\r\n            <Route path=\"/admin\" component={BoardAdmin} /> */}\r\n            </Switch>\r\n          </div>\r\n          <footer className=\"footer navbar-dark bg-dark\">\r\n            <div className=\"footer__logo\">\r\n              {\" \"}\r\n              <img src=\"/logo-green.png\" alt=\"Natour logo\" />\r\n            </div>\r\n            <ul className=\"footer__nav\">\r\n              <li>\r\n                <Link to=\"/#\">About us</Link>\r\n              </li>\r\n              <li>\r\n                <Link to=\"/#\">Download apps</Link>\r\n              </li>\r\n              <li>\r\n                <Link to=\"/#\">Become a guide </Link>\r\n              </li>\r\n              <li>\r\n                <Link to=\"/#\">Careers</Link>\r\n              </li>\r\n              <li>\r\n                <Link to=\"/#\">Contact</Link>\r\n              </li>\r\n            </ul>\r\n            <p className=\"footer__copyright\">\r\n              &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &copy; by ChinhIoT. with\r\n              from IoT Team GHTK !{\" \"}\r\n            </p>\r\n          </footer>\r\n        </div>\r\n      </Router>\r\n    </React.Suspense>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { SET_MESSAGE, CLEAR_MESSAGE } from \"./types\";\r\n\r\nexport const setMessage = (message) => ({\r\n  type: SET_MESSAGE,\r\n  payload: message,\r\n});\r\n\r\nexport const clearMessage = () => ({\r\n  type: CLEAR_MESSAGE,\r\n});\r\n","const isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\nimport store from \"./store\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can chađinge\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}