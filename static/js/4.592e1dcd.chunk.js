(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{231:function(e,c,t){"use strict";t.r(c);var s=t(5),a=t(15),n=t.n(a),i=t(18),r=t(4),o=t(1),l=t(61),d=t.n(l),j=t(3),b=t(6),x=t(230),u=t(229),m=t(14),h={getAll:function(e){return m.a.get("/tours",{params:e})},getTour:function(e){var c="/tours/".concat(e);return m.a.get(c)}},v=t(0);c.default=function(e){console.log("den day ch\u01b0a");var c=Object(b.c)((function(e){return e.tour})).tours,t=Object(j.g)(),a=(t.slug,t.tourId),l=Object(o.useState)({guides:[],startDates:[],images:[],locations:[],reviews:[],description:""}),m=Object(r.a)(l,2),O=m[0],g=m[1],p=Object(o.useState)(5),_=Object(r.a)(p,2),N=(_[0],_[1],Object(o.useState)({})),w=Object(r.a)(N,2),f=w[0],y=w[1],k=Object(o.useState)(null),T=Object(r.a)(k,2),I=T[0],Y=T[1];Object(o.useEffect)((function(){var e=function(){var e=Object(i.a)(n.a.mark((function e(){var c,t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.getTour(a);case 3:c=e.sent,console.log(c),g(c.data.data),(t=c.data.data).locations.length>0&&y({latitude:t.locations[0].coordinates[1],longitude:t.locations[0].coordinates[0],zoom:9}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Fail to featch tour",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[c,a]);var A=[{icon:"calendar",label:"NEXT DAY",text:"".concat(d()(O.startDates[0]).format("DD/MM/YYYY"))},{icon:"trending-up",label:"DIFFICULTY",text:"".concat(O.difficulty)},{icon:"user",label:"PARTICIPAINTS",text:"".concat(O.maxGroupSize)},{icon:"star",label:"RATING",text:"".concat(O.ratingsAverage)}].map((function(e,c){var t=e.icon,s=e.label,a=e.text;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("li",{className:"overview-box__detail",children:[Object(v.jsx)("svg",{className:"overview-box__icon",children:Object(v.jsx)("use",{xlinkHref:"/icons.svg#icon-".concat(t)})}),Object(v.jsx)("span",{className:"overview-box__label",children:s}),Object(v.jsx)("span",{className:"overview-box__text",children:a})]},c)})})),D=O.guides.map((function(e,c){return Object(v.jsxs)("div",{className:"overview-box__detail",children:[Object(v.jsx)("img",{className:"overview-box__img",src:"/users/".concat(e.photo),alt:e.name}),"lead-guide"===e.role?Object(v.jsx)("span",{className:"overview-box__label",children:"Lead guide"}):Object(v.jsx)("span",{className:"overview-box__label",children:"Tour guide"}),Object(v.jsx)("span",{className:"overview-box__text",children:e.name})]},c)})),S=O.description.split("\n").map((function(e,c){return Object(v.jsx)("p",{className:"description__text",children:e},c)})),C=O.images.map((function(e,c){return Object(v.jsx)("div",{className:"picture-box",children:Object(v.jsx)("img",{className:"picture-box__img",src:"/tours/".concat(e),alt:"The Park Camper Tour ".concat(c+1)})})}));return Object(o.useEffect)((function(){var e=function(e){"Escape"===e.key&&Y(null)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("section",{className:"section-header",children:[Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"header__hero-overlay",children:"\xa0"}),Object(v.jsx)("img",{className:"header__hero-img",src:"/tours/".concat(O.imageCover),alt:O.name})]}),Object(v.jsxs)("div",{className:"heading-box",children:[Object(v.jsx)("h1",{className:"heading-primary",children:Object(v.jsx)("span",{children:O.name})}),Object(v.jsxs)("div",{className:"heading-box__group",children:[Object(v.jsxs)("div",{className:"heading-box__detail",children:[Object(v.jsx)("svg",{className:"heading-box__icon",children:Object(v.jsx)("use",{xlinkHref:"/icons.svg#icon-clock"})}),Object(v.jsxs)("span",{className:"heading-box__text",children:[O.duration," DAYS"]})]}),Object(v.jsxs)("div",{className:"heading-box__detail",children:[Object(v.jsx)("svg",{className:"heading-box__icon",children:Object(v.jsx)("use",{xlinkHref:"/icons.svg#icon-map-pin"})}),Object(v.jsxs)("span",{className:"heading-box__text",children:[O.name," DAYS"]})]})]})]})]}),Object(v.jsxs)("section",{className:"section-description",children:[Object(v.jsx)("div",{className:"overview-box",children:Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"overview-box__group",children:[Object(v.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Quick facts"}),Object(v.jsxs)("div",{children:[" ",A]})]}),Object(v.jsxs)("div",{className:"overview-box__group",children:[Object(v.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Your tour guide"}),Object(v.jsx)("div",{children:D})]})]})}),Object(v.jsxs)("div",{className:"description-box",children:[Object(v.jsxs)("h2",{className:"heading-secondary ma-bt-lg",children:["About ".concat(O.name," tour")," "]}),Object(v.jsx)("span",{className:"description__text",children:S})]})]}),Object(v.jsx)("section",{className:"section-pictures",children:Object(v.jsx)("div",{children:C})}),Object(v.jsx)("section",{children:Object(v.jsx)("div",{children:Object(v.jsxs)(u.c,Object(s.a)(Object(s.a)({},f),{},{height:"600px",width:"auto",mapStyle:"mapbox://styles/mapbox/streets-v11",onViewportChange:y,mapboxApiAccessToken:"pk.eyJ1IjoiY2hpbmhudjQ2IiwiYSI6ImNrdDhibW1kazEwbnMydmxqZTN0NTNwYjgifQ.LegkQHZ53fkU8hcpa-Py2w",children:[O.locations.map((function(e){return Object(v.jsx)(u.a,{latitude:e.coordinates[1],longitude:e.coordinates[0],children:Object(v.jsx)("button",{className:"marker-btn",onClick:function(c){c.preventDefault(),Y(e)},children:Object(v.jsx)("img",{src:"/Map_pin_icon_green.svg.png",alt:"GHTK Icon"})})},O.locations._id)})),I?Object(v.jsx)(u.b,{latitude:I.coordinates[1],longitude:I.coordinates[0],onClose:function(){Y(null)},children:Object(v.jsx)("div",{children:Object(v.jsx)("h4",{className:"text-secondary",children:I.description})})}):null]}))})}),Object(v.jsx)("section",{children:Object(v.jsx)("div",{className:"reviews",children:O.reviews.map((function(e){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"reviews__card",children:[Object(v.jsxs)("div",{className:"reviews__avatar",children:[Object(v.jsx)("img",{className:"reviews__avatar-img",src:"/users/".concat(e.user.photo),alt:"".concat(e.user.name)}),Object(v.jsx)("h4",{className:"reviews__user",children:e.user.name})]}),Object(v.jsx)("h4",{className:"review__text",children:e.review}),Object(v.jsx)("div",{className:"reviews__rating",children:[1,2,3,4,5].map((function(c,t){return Object(v.jsx)(x.a,{className:"reviews__star--".concat(e.rating>=c?"active":"inactive")})}))})]})})}))})}),Object(v.jsx)("section",{className:"section-cta",children:Object(v.jsxs)("div",{className:"cta",children:[O.images.map((function(e,c){return Object(v.jsx)("img",{className:"cta__img cta__img--".concat(c),src:"/tours/".concat(e),alt:"tour picture"})})),Object(v.jsxs)("div",{className:"cta__content",children:[Object(v.jsx)("h2",{className:"heading-secondary",children:" What are you waiting for ?"}),Object(v.jsx)("p",{className:"cta__text",children:"".concat(O.duration," day . 1 adventure. Make it yours today !")}),Object(v.jsx)("button",{className:"btn btn--green span-all-rows",children:"Book tour now!"})]})]})})]})}}}]);
//# sourceMappingURL=4.592e1dcd.chunk.js.map